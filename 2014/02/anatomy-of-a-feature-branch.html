<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Anatomy of a Feature Branch</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ricardo Gladwell's Blog">
    <meta name="author" content="Ricardo Gladwell">
    <meta name="keywords" content="java,android,scala,maven,eclipse,git">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/asciidoctor.css" rel="stylesheet">
    <link href="/css/base.css" rel="stylesheet">
    <link href="/css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
  </head>
  <body>
    <div id="wrap">
	
    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="http://gladwell.me/">Ricardo Gladwell</a>
        </div><!-- /.navbar-header -->
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="/feed.xml">Subscribe</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </div><!-- /.navbar -->
    <div class="container">	
	<div class="page-header">
		<h1>Anatomy of a Feature Branch</h1>
	</div>

	<p><em>16 February 2014</em></p>

	<p><p>As I've worked more with <strong>git</strong> I've come appreciate the <a href="https://blog.mozilla.org/webdev/2011/11/21/git-using-topic-branches-and-interactive-rebasing-effectively/" title="Git: Using topic branches and interactive rebasing effectively">rebase workflow</a> and to realise the importance of a clean history through the joys of <a href="http://git-scm.com/book/en/Git-Tools-Rewriting-History" alt="Git Tools - Rewriting History">interactive rebasing</a>.</p>

<p>Over time I've noticed patterns in the type of commits I squash and those I keep separate, a process for keeping the commit history clear and understandable. I like to think of this process for as a kind of <a href="http://c2.com/cgi/wiki?SingleResponsibilityPrinciple">Single Responsibility Principle</a> for source control: a commit should encapsulate a single change to the code, such as implementing a new feature or a single refactoring. There are types of commits, and with those types I've found patterns of dealing with those.</p>

<p>In other words, an anatomy of a feature branch and a process for cleanly rebasing.</p>

<p>By following this process managing source code becomes so much easier and even non-techies can read the revision history.</P>

<p>So lets start with an example of a typical, messy feature branch untouched by a rebase:</p>

<h2>Test Commit</h2>

<h2>Feature Commits</h2>

<p>Here we can see there are four feature commits: two adding (failing) tests for our new feature, and another two which adds implementing code and satisfies the unit tests, in good TDD fashion. Generally these four commits would be squashed together to make a single, feature commit with all the changes specific to the story acceptance criteria contained within.</p>

<h2>Refactor Commits</h2>

<p>Associated with these are a couple of re-factor commits: as part of the agile process, developers should re-factor code to make it simpler and more efficient as they add functionality, fixing code smells, resolving TODOs, etc.</p>

<p>And this is what happened here: in-between implementing my two feature commits I noticed an area of the code which could use re-factoring. Instead, I could have committed my work and branched off the master  to keep them completely separate but I think that approach could proliferate branches, and I still think re-factoring work is tangentially related to the core feature/story I'm working on.</p>

<p>However, I don't squash these commits along with the feature commits: I prefer to keep them to make it clear which changes are directly related to the feature I'm working on. Typically I re-order these commits so they appear last in the branch history.</p>

<h2>Bug Fix Commits</h2>

<p>Similarly, sometimes as I working on features I come across bugs in existing code which I fix. These bug fix commits are treated just like re-factor commits and left un-squashed in the branch.</p>

<h2>Local Fix Commits</h2>

<p>Sometimes as I'm coding a complex feature I'll implement several core commits before I realise I introduced a bug or two earlier. This leads to several local fix commits: since they don't fix bugs outside of the branch, I generally squash them along with the commits that introduced the bug (usually refactor or feature commits).</p>

<p>This has two nice features: firstly it simplifies the commit log, and secondly it means if people roll back to my feature commit they are guaranteed to get working code.</p>

<h2>Tidy Commits</h2>

<p>Finally, as I'm messing around with code I frequently spot formatting mistakes, compiler warnings and other niggling problems that I've missed. These tidy commits are typically treated like local fix commits and squashed with the feature or refactor commit that introduced them.</p>

<h2>Partial or Save Point Commits</h2>

The nice thing about the rebase workflow is that, if you're caught halfway through an implementation or making your tests go green, you can just commit your partial work and come back to it the next day without breaking the build.

<h2>Summary</h2>

<p>I find I get a nice balance with the above approach, ensuring I commit regularly (rather than waste time worrying too much about what is in each commit) while at the same time ensuring that I end up with a simpler and more legible commit log to merge into my master branch once the story is complete.</p>

<p>One last advantage of using the interactive rebase is that I can also review my commit messages. Normally these are rushed while I focus on getting my work done, so its nice to be given an opportunity to review and edit these to make them clearer and tidy up any spelling or grammatical mistakes.</p>
</p>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'grey-area'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
	<hr>
	
		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2013, 2014 | Mixed with <a href="http://twitter.github.com/bootstrap/">Bootstrap v2.3.1</a> | Baked with <a href="http://jbake.org">JBake v2.2.1</a> | Decorated with Bootswatch <a href="http://bootswatch.com/cyborg/">Cyborg Theme v3.1.0+1</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/js/jquery-1.9.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/run_prettify.js"></script>

Error reading included file analytics.ftl
The problematic instruction:
----------
==> include "analytics.ftl" [on line 17, column 5 in footer.ftl]
 in include "footer.ftl" [on line 17, column 1 in post.ftl]
----------

Java backtrace for programmers:
----------
freemarker.template.TemplateException: Error reading included file analytics.ftl
	at freemarker.core.Include.accept(Include.java:167)
	at freemarker.core.Environment.visit(Environment.java:221)
	at freemarker.core.MixedContent.accept(MixedContent.java:92)
	at freemarker.core.Environment.visit(Environment.java:221)
	at freemarker.core.Environment.include(Environment.java:1508)
	at freemarker.core.Include.accept(Include.java:169)
	at freemarker.core.Environment.visit(Environment.java:221)
	at freemarker.core.MixedContent.accept(MixedContent.java:92)
	at freemarker.core.Environment.visit(Environment.java:221)
	at freemarker.core.Environment.process(Environment.java:199)
	at freemarker.template.Template.process(Template.java:259)
	at org.jbake.app.Renderer.render(Renderer.java:91)
	at org.jbake.app.Renderer.render(Renderer.java:126)
	at org.jbake.app.Oven.bake(Oven.java:136)
	at org.jbake.launcher.Main.run(Main.java:39)
	at org.jbake.launcher.Main.main(Main.java:32)
Caused by: java.io.FileNotFoundException: Template analytics.ftl not found.
	at freemarker.template.Configuration.getTemplate(Configuration.java:580)
	at freemarker.core.Environment.getTemplateForInclusion(Environment.java:1490)
	at freemarker.core.Include.accept(Include.java:157)
	... 15 more
